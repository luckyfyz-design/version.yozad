<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ“Š å›ºä»¶ç‰ˆæœ¬ä¿¡æ¯</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f5f7fa;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .controls {
      margin-bottom: 20px;
      padding: 15px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .controls-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .controls-title {
      font-weight: bold;
      color: #2c3e50;
    }
    .action-buttons {
      display: flex;
      gap: 10px;
    }
    .checkbox-groups {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
	/* é€‰æ‹©æ¡†ç»„æ ·å¼ */
    .checkbox-group {
      flex: 1;
      min-width: 100px;
    }
    .checkbox-group-title {
      font-weight: bold;
      color: #3498db;
      margin-bottom: 8px;
      padding-bottom: 5px;
      border-bottom: 1px solid #eee;
    }
    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-bottom: 5px;
    }
    .checkbox-item label {
      font-size: 0.85em;
      color: #555;
      cursor: pointer;
    }
    .checkbox-item input[type="checkbox"] {
      cursor: pointer;
    }
    button {
      padding: 8px 16px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #2980b9;
    }
    button:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
    }
    .download-btn {
      background-color: #2ecc71;
      padding: 4px 12px;
      font-size: 0.8em;
    }
    .download-btn:hover {
      background-color: #27ae60;
    }
    .view-log-btn {
      background-color: #f39c12;
      padding: 4px 12px;
      font-size: 0.8em;
    }
    .view-log-btn:hover {
      background-color: #e67e22;
    }
    .refresh-btn {
      background-color: #2ecc71;
    }
    .refresh-btn:hover {
      background-color: #27ae60;
    }
    .product-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      background-color: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .product-card h2 {
      margin-top: 0;
      color: #2c3e50;
      font-size: 1.6em;
      padding-bottom: 10px;
      border-bottom: 2px solid #3498db;
      margin-bottom: 20px;
    }
    .module-card {
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 15px;
      background-color: #f9f9f9;
    }
    .module-card:last-child {
      margin-bottom: 0;
    }
    .module-title {
      font-size: 1.2em;
      color: #2980b9;
      margin-top: 0;
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 1px dashed #ddd;
    }
    .info {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px 0;
    }
    .info-item-version {
      flex: 1;
      min-width: 300px;
    }
	.info-item {
      flex: 1;
      min-width: 150px;
    }
    .label {
      font-weight: bold;
      color: #7f8c8d;
      font-size: 0.9em;
      display: block;
      margin-bottom: 5px;
    }
    .value {
      color: #2c3e50;
    }
    .history {
      margin-top: 12px;
      font-size: 0.9em;
      color: #555;
    }
    .history-item {
      display: block;
      padding: 6px 0;
      border-bottom: 1px dotted #eee;
      cursor: pointer;
      transition: all 0.2s;
    }
    .history-item:hover {
      background-color: #f0f8ff;
      padding-left: 5px;
      color: #3498db;
    }
    .history-item:last-child {
      border-bottom: none;
    }
    .loading {
      text-align: center;
      color: #7f8c8d;
      font-style: italic;
      margin: 20px 0;
    }
    .error {
      color: #e74c3c;
      font-size: 0.9em;
      margin-top: 6px;
    }
    .error-module {
      background-color: #fee;
      border-color: #e74c3c;
    }
    footer {
      text-align: center;
      margin-top: 40px;
      color: #95a5a6;
      font-size: 0.8em;
    }
    .url-info {
      margin-top: 10px;
      font-size: 0.8em;
      color: #7f8c8d;
      padding-top: 8px;
      border-top: 1px solid #eee;
    }
    
    /* å¯¹è¯æ¡†æ ·å¼ */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    
    .modal-content {
	  background-color: white;
	  padding: 20px;
	  border: none;
	  border-radius: 8px;
	  width: 50%;               /* å®½åº¦ä¸ºè§†å£å®½åº¦çš„ä¸€åŠ */
	  max-width: 800px;         /* å¯é€‰ï¼šé˜²æ­¢åœ¨è¶…å®½å±ä¸Šè¿‡å¤§ */
	  max-height: 80vh;
	  overflow-y: auto;
	  position: fixed;
	  top: 50%;
	  left: 50%;
	  transform: translate(-50%, -50%); /* ç²¾ç¡®å±…ä¸­ */
	  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
	}
    
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      line-height: 1;
    }
    
    .close:hover {
      color: #000;
    }
    
	.log-content {
	  white-space: pre;          /* å…³é”®ï¼šç¦æ­¢è‡ªåŠ¨æ¢è¡Œ */
	  overflow-x: auto;          /* æ¨ªå‘æ»šåŠ¨ */
	  overflow-y: auto;          /* çºµå‘æ»šåŠ¨å·²å­˜åœ¨ï¼Œä¿ç•™ */
	  font-family: monospace;
	  background-color: #f5f5f5;
	  padding: 15px;
	  border-radius: 4px;
	  border: 1px solid #ddd;
	  max-height: 400px;
	  /* ç§»é™¤æˆ–æ³¨é‡Šæ‰ä¸‹é¢è¿™è¡Œï¼ˆå¦‚æœå­˜åœ¨ï¼‰ */
	  /* word-wrap: break-word; */
	}
    
    .modal-title {
      margin-top: 0;
      color: #2c3e50;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ğŸ“Š å›ºä»¶ç‰ˆæœ¬ä¿¡æ¯ä¸­å¿ƒ</h1>
  
  <!-- æ§åˆ¶é¢æ¿ -->
  <div class="controls">
    <div class="controls-header">
      <div class="controls-title">é€‰æ‹©è¦æ˜¾ç¤ºçš„å›ºä»¶æ¨¡å—ï¼š</div>
      <div class="action-buttons">
        <button id="selectAll">å…¨é€‰</button>
        <button id="selectNone">å…¨ä¸é€‰</button>
        <button id="refreshBtn" class="refresh-btn">ğŸ”„ è·å–æ•°æ®</button>
      </div>
    </div>
    
    <div class="checkbox-groups" id="moduleFilters">
      <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptæŒ‰äº§å“åˆ†ç»„åŠ¨æ€ç”Ÿæˆå¤é€‰æ¡† -->
    </div>
  </div>
  
  <div id="results"></div>
</div>

<!-- æ›´æ–°æ—¥å¿—å¯¹è¯æ¡† -->
<div id="logModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3 class="modal-title" id="modalTitle">æ›´æ–°æ—¥å¿—</h3>
    <div class="log-content" id="logContent">åŠ è½½ä¸­...</div>
  </div>
</div>

<footer>
  Â© 2025 ç‰ˆæœ¬ç›‘æ§å·¥å…· | æœ¬åœ°è¿è¡Œ Â· å®‰å…¨å¯æ§
</footer>

<script>
// URL åˆ—è¡¨å’Œå¯¹åº”çš„äº§å“åç§°
const urlMap = [
  { url: "https://lithtml.com/Update/ASPD-110/", update: "update_mcu_v21.json", name: "å†°ç®±ç‰ˆ-ä¸»æ§æ¿", product: "æ±¡æ°´", log:"ä¿®æ”¹è®°å½•_ASPD_110_MCU_V21.txt", rawUrl:"http://dl.cii-tech.com/Update/ASPD-110/update_mcu_v21.json" },
  { url: "https://lithtml.com/Update/ASPD-110/", update: "update_safs_b.json", name: "å†°ç®±ç‰ˆ-å®‰å“æ¿", product: "æ±¡æ°´", log:"ä¿®æ”¹è®°å½•_SAFS-110B_android.txt", rawUrl:"http://dl.cii-tech.com/Update/ASPD-110/update_safs_b.json" },
  { url: "https://lithtml.com/Update/ASPD-110/", update: "update_safs.json", name: "å†°ç®±ç‰ˆ-ç›‘æ§APP", product: "æ±¡æ°´", log:"ä¿®æ”¹è®°å½•_SAFS-110_android.txt", rawUrl:"http://dl.cii-tech.com/Update/ASPD-110/update_safs.json" },
  { url: "https://lithtml.com/Update/SAS-210/", update: "update.json", name: "å•ç“¶æ¿-ä¸»æ§æ¿", product: "æ±¡æ°´", log:"ä¿®æ”¹è®°å½•.txt", rawUrl:"http://dl.cii-tech.com/Update/SAS-210/update.json" },
  { url: "https://lithtml.com/Update/ASPD-110/", update: "update.json", name: "æ±¡æ°´APP", product: "æ±¡æ°´", log:"ä¿®æ”¹è®°å½•_ASPD_110_MCU.txt", rawUrl:"http://dl.cii-tech.com/Update/ASPD-110/update.json" },
  { url: "https://lithtml.com/Update/CRAIV-210Y/", update: "update.json", name: "Craiv210Y-å®‰å“æ¿", product: "ä¸€ä½“æœº", log:"ä¿®æ”¹è®°å½•_CRAIV-210Y_android.txt", rawUrl:"http://dl.cii-tech.com/Update/CRAIV-210Y/update.json" },
  { url: "https://lithtml.com/Update/CRAIV-210Y/", update: "update_mcu_v21.json", name: "Craiv210Y-ä¸»æ§æ¿", product: "ä¸€ä½“æœº", log:"ä¿®æ”¹è®°å½•_CRAIV_210Y_Main_V21.txt", rawUrl:"http://dl.cii-tech.com/Update/CRAIV-210Y/update_mcu_v21.json" },
  { url: "https://lithtml.com/Update/CRAIV-210Y/", update: "update_signal.json", name: "Craiv210Y-ä¿¡å·æ¿", product: "ä¸€ä½“æœº", log:"ä¿®æ”¹è®°å½•_CRAIV_210Y_Signal.txt", rawUrl:"http://dl.cii-tech.com/Update/CRAIV-210Y/update_signal.json" },
  { url: "https://lithtml.com/Update/CRAIV-110Y/", update: "update.json", name: "Craiv110Y-å®‰å“æ¿", product: "ä¸€ä½“æœº", log:"ä¿®æ”¹è®°å½•_CRAIV-110Y_android.txt", rawUrl:"http://dl.cii-tech.com/Update/CRAIV-110Y/update.json" },
  { url: "https://lithtml.com/Update/CRA-110/", update: "update.json", name: "æŒä¸Šæ‰«æ¯’", product: "æŒä¸Šæ‰«æ¯’", log:"ä¿®æ”¹è®°å½•_CRA-110_android.txt", rawUrl:"http://dl.cii-tech.com/Update/CRA-110/update.json" },
  { url: "https://lithtml.com/Update/HIA-100/", update: "update.json", name: "æ‰‹æŒè§å…‰", product: "æ‰‹æŒè§å…‰", log:"ä¿®æ”¹è®°å½•.txt", rawUrl:"http://dl.cii-tech.com/Update/HIA-100/update.json"}
];

const resultsContainer = document.getElementById("results");
const moduleFiltersContainer = document.getElementById("moduleFilters");
const refreshBtn = document.getElementById("refreshBtn");
const selectAllBtn = document.getElementById("selectAll");
const selectNoneBtn = document.getElementById("selectNone");
const logModal = document.getElementById("logModal");
const modalTitle = document.getElementById("modalTitle");
const logContent = document.getElementById("logContent");
const closeBtn = document.querySelector(".close");

const results = {}; // ç”¨äºå­˜å‚¨æ‰€æœ‰è·å–åˆ°çš„æ•°æ®

// ä»æœ¬åœ°å­˜å‚¨åŠ è½½å‹¾é€‰çŠ¶æ€
let selectedModules = loadSelectedModules();

// ç”Ÿæˆæ¨¡å—ç­›é€‰å¤é€‰æ¡†ï¼ˆæŒ‰äº§å“åˆ†ç»„ï¼‰
function renderModuleFilters() {
  moduleFiltersContainer.innerHTML = '';
  
  // æŒ‰äº§å“åˆ†ç»„
  const groupedModules = {};
  urlMap.forEach(item => {
    if (!groupedModules[item.product]) {
      groupedModules[item.product] = [];
    }
    groupedModules[item.product].push(item);
  });
  
  // ä¸ºæ¯ä¸ªäº§å“åˆ›å»ºä¸€ä¸ªå¤é€‰æ¡†ç»„
  Object.entries(groupedModules).forEach(([productName, modules]) => {
    const groupDiv = document.createElement('div');
    groupDiv.className = 'checkbox-group';
    groupDiv.innerHTML = `<div class="checkbox-group-title">${productName}</div>`;
    
    modules.forEach(module => {
      const checkboxId = `module-${module.url.replace(/[^a-zA-Z0-9]/g, '-')}`;
      const checkbox = document.createElement('div');
      checkbox.className = 'checkbox-item';
      checkbox.innerHTML = `
        <input type="checkbox" id="${checkboxId}" value="${module.url}${module.update}" ${selectedModules.includes(module.url + module.update) ? 'checked' : ''}>
        <label for="${checkboxId}">${module.name}</label>
      `;
      groupDiv.appendChild(checkbox);
    });
    
    moduleFiltersContainer.appendChild(groupDiv);
  });
  
  // æ·»åŠ äº‹ä»¶ç›‘å¬
  document.querySelectorAll('#moduleFilters input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', saveSelectedModules);
  });
}

// ä¿å­˜å‹¾é€‰çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
function saveSelectedModules() {
  const checkboxes = document.querySelectorAll('#moduleFilters input[type="checkbox"]:checked');
  selectedModules = Array.from(checkboxes).map(cb => cb.value);
  localStorage.setItem('selectedModules', JSON.stringify(selectedModules));
}

// ä»æœ¬åœ°å­˜å‚¨åŠ è½½å‹¾é€‰çŠ¶æ€
function loadSelectedModules() {
  const saved = localStorage.getItem('selectedModules');
  if (saved) {
    return JSON.parse(saved);
  }
  // é»˜è®¤å…¨é€‰ï¼ˆæ‰€æœ‰URLï¼‰
  return urlMap.map(item => item.url + item.update);
}

// è·å–é€‰ä¸­çš„æ¨¡å—
function getSelectedModules() {
  return selectedModules;
}

// æ„å»ºä¸‹è½½URL
function buildDownloadUrl(basePath, fileName) {
  // è·å–åŸºç¡€URLï¼ˆå»æ‰æ–‡ä»¶åéƒ¨åˆ†ï¼‰
  const baseUrl = basePath;
  return baseUrl + fileName;
}

// ä¸‹è½½æ–‡ä»¶å‡½æ•°
function downloadFile(url, filename) {
  // å¦‚æœæ˜¯åŒæºï¼Œå¯ä»¥ç›´æ¥ç”¨ a[download]
  if (new URL(url).origin === window.location.origin) {
    const link = document.createElement('a');
    link.href = url;
    link.download = filename || url.substring(url.lastIndexOf('/') + 1);
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    return;
  }

  // è·¨åŸŸæƒ…å†µï¼šå¿…é¡»é€šè¿‡ fetch + Blob æ–¹å¼
  fetch(url)
    .then(response => {
      if (!response.ok) {
        throw new Error(`ä¸‹è½½å¤±è´¥: ${response.status} ${response.statusText}`);
      }
      return response.blob();
    })
    .then(blob => {
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = filename || url.substring(url.lastIndexOf('/') + 1);
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(link.href); // é‡Šæ”¾å†…å­˜
    })
    .catch(err => {
      alert(`ä¸‹è½½å¤±è´¥ï¼š${err.message}\n\nURL: ${url}`);
      console.error('Download error:', err);
    });
}

// ç‚¹å‡»å†å²ç‰ˆæœ¬ä¸‹è½½æ–‡ä»¶
function downloadHistoryVersion(basePath, version) {
  const downloadUrl = buildDownloadUrl(basePath, version);
  downloadFile(downloadUrl, version);
}

// æ˜¾ç¤ºæ›´æ–°æ—¥å¿—å¯¹è¯æ¡†
function showUpdateLog(basePath, logFile, moduleName) {
  modalTitle.textContent = `æ›´æ–°æ—¥å¿— - ${moduleName}`;
  logContent.textContent = "åŠ è½½ä¸­...";
  logModal.style.display = "block";

  const logUrl = buildDownloadUrl(basePath, logFile);

  fetch(logUrl)
    .then(response => {
      if (!response.ok) {
        throw new Error(`æœåŠ¡å™¨é”™è¯¯: ${response.status}`);
      }
      return response.arrayBuffer(); // è·å–åŸå§‹äºŒè¿›åˆ¶æ•°æ®
    })
    .then(arrayBuffer => {
      // ä½¿ç”¨ TextDecoder æŒ‡å®šç¼–ç ä¸º 'gbk'ï¼ˆå…¼å®¹ GB2312ï¼‰
      const decoder = new TextDecoder('gbk', { fatal: false });
      const text = decoder.decode(arrayBuffer);
      logContent.textContent = text;
    })
    .catch(error => {
      logContent.textContent = `åŠ è½½æ›´æ–°æ—¥å¿—å¤±è´¥: ${error.message}`;
    });
}

async function loadAllVersions() {
  // ç¦ç”¨æŒ‰é’®
  refreshBtn.disabled = true;
  refreshBtn.textContent = "åŠ è½½ä¸­...";

  const productData = {};
  const selectedUrls = getSelectedModules();
  
  // å…ˆæŒ‰äº§å“åˆ†ç»„
  for (const item of urlMap) {
    const fullUrl = item.url + item.update;
    if (!selectedUrls.includes(fullUrl)) {
      continue; // è·³è¿‡æœªé€‰ä¸­çš„æ¨¡å—
    }
    if (!productData[item.product]) {
      productData[item.product] = [];
    }
    productData[item.product].push(item);
  }

  // æ¸…ç©ºç»“æœå®¹å™¨
  resultsContainer.innerHTML = "";

  try {
    // ä¸ºæ¯ä¸ªæœ‰é€‰ä¸­æ¨¡å—çš„äº§å“åˆ›å»ºå¡ç‰‡
    for (const [productName, items] of Object.entries(productData)) {
      if (items.length === 0) continue; // è·³è¿‡æ²¡æœ‰é€‰ä¸­æ¨¡å—çš„äº§å“
      
      const productCard = document.createElement("div");
      productCard.className = "product-card";
      productCard.innerHTML = `<h2>${productName}</h2>`;
      
      const modulesContainer = document.createElement("div");
      
      // ä¸ºæ¯ä¸ªé€‰ä¸­çš„æ¨¡å—åŠ è½½æ•°æ®
      for (const item of items) {
        const fullUrl = item.url + item.update;
        try {
          const response = await fetch(fullUrl);
          if (!response.ok) {
            throw new Error(`æœåŠ¡å™¨é”™è¯¯: ${response.status}`);
          }
          const data = await response.json();
          
          // ä¿å­˜æ•°æ®åˆ°å…¨å±€å¯¹è±¡
          results[fullUrl] = data;
          
          modulesContainer.appendChild(createModuleCard(data, item.url, item.name, item.log, item.rawUrl));
        } catch (err) {
          modulesContainer.appendChild(createErrorModuleCard(fullUrl, item.name, err.message));
        }
      }
      
      productCard.appendChild(modulesContainer);
      resultsContainer.appendChild(productCard);
    }
  } finally {
    // å¯ç”¨æŒ‰é’®
    refreshBtn.disabled = false;
    refreshBtn.textContent = "ğŸ”„ è·å–æ•°æ®";
  }
}

function createModuleCard(data, baseUrl, name, logFile, rawUrl) {
  const moduleCard = document.createElement("div");
  moduleCard.className = "module-card";

  // æ„å»ºæœ€æ–°ç‰ˆæœ¬ä¸‹è½½URL
  const latestDownloadUrl = data.latest ? buildDownloadUrl(baseUrl, data.latest) : null;
  
  // æ„å»ºå†å²ç‰ˆæœ¬åˆ—è¡¨
  let historyList = "";
  if (data.history && Array.isArray(data.history) && data.history.length > 0) {
    historyList = `<details><summary>å†å²ç‰ˆæœ¬ (${data.history.length})</summary><div class="history">`;
    data.history.forEach(version => {
      historyList += `
        <div class="history-item" onclick="downloadHistoryVersion('${baseUrl}', '${version}')" title="ç‚¹å‡»ä¸‹è½½ ${version}">
          ${version}
        </div>
      `;
    });
    historyList += `</div></details>`;
  }

  moduleCard.innerHTML = `
    <h3 class="module-title">${name}</h3>
    <div class="info">
      <div class="info-item-version">
        <span class="label">è½¯ä½“ç‰ˆæœ¬:</span>
        <span class="value">${data.softVersion || '-'}</span>
      </div>
      <div class="info-item">
        <span class="label">å‘å¸ƒè€…:</span>
        <span class="value">${data.publisher || '-'}</span>
      </div>
      <div class="info-item">
        <span class="label">å‘å¸ƒæ—¥æœŸ:</span>
        <span class="value">${data.releaseDate || '-'}</span>
      </div>
      <div class="info-item">
        <span class="label">ç‰ˆæœ¬å·:</span>
        <span class="value">${data.releaseVersion || '-'}</span>
      </div>
	  <div class="info-item">
		<span class="label">æœ€æ–°ç‰ˆ:</span>
        <button class="download-btn" onclick="downloadFile('${latestDownloadUrl}', '${data.latest}')"  title="ç‚¹å‡»ä¸‹è½½æœ€æ–°ç‰ˆ">ä¸‹è½½</button>
      </div>
	  <div class="info-item">
		<span class="label">æ›´æ–°æ—¥å¿—:</span>
        <button class="view-log-btn" onclick="showUpdateLog('${baseUrl}', '${logFile}', '${name}')"  title="ç‚¹å‡»æŸ¥çœ‹æ›´æ–°æ—¥å¿—">æŸ¥çœ‹</button>
		<button class="download-btn" style="margin-left:6px;" onclick="downloadFile('${buildDownloadUrl(baseUrl, logFile)}', '${logFile}')" title="ä¸‹è½½æ›´æ–°æ—¥å¿—">ä¸‹è½½</button>
      </div>
    </div>
    ${historyList}
    <div class="url-info">
      <span class="label">æ•°æ®æº:</span> <code>${rawUrl}</code>
    </div>
  `;
  return moduleCard;
}

function createErrorModuleCard(url, name, errorMsg) {
  const moduleCard = document.createElement("div");
  moduleCard.className = "module-card error-module";
  moduleCard.innerHTML = `
    <h3 class="module-title" style="color:#e74c3c;">âŒ ${name}</h3>
    <div class="error"><strong>é”™è¯¯ä¿¡æ¯:</strong> ${errorMsg}</div>
    <div class="url-info">
      <span class="label">URLåœ°å€:</span> <code>${url}</code>
    </div>
  `;
  return moduleCard;
}

// äº‹ä»¶ç›‘å¬
refreshBtn.addEventListener('click', () => {
  loadAllVersions().catch(console.error);
});

selectAllBtn.addEventListener('click', () => {
  document.querySelectorAll('#moduleFilters input[type="checkbox"]').forEach(checkbox => {
    checkbox.checked = true;
  });
  saveSelectedModules();
});

selectNoneBtn.addEventListener('click', () => {
  document.querySelectorAll('#moduleFilters input[type="checkbox"]').forEach(checkbox => {
    checkbox.checked = false;
  });
  saveSelectedModules();
});

// å¯¹è¯æ¡†äº‹ä»¶ç›‘å¬
closeBtn.addEventListener('click', () => {
  logModal.style.display = "none";
});

window.addEventListener('click', (event) => {
  if (event.target === logModal) {
    logModal.style.display = "none";
  }
});

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
window.onload = () => {
  renderModuleFilters();
  loadAllVersions().catch(console.error);
};
</script>


